<script type="text/javascript" src="/public/app-content/jquery.main.js"></script>
<link rel="stylesheet" href="/public/css/scholar.css">
<style>
    .container #first_step, #second_step, #third_step { display: none; }
    .container #first_step { display: block; }
    .container input.valid { border: 1px solid #1FFF00; }
    .container{ width: 100%;}
</style>

<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header"><i class="fa fa-shield fa-fw"></i> Scholarship Enrollment</h1>
    </div>
    <!-- /.col-lg-12 -->
</div>
<div>

    <form name="scholarship" class="form-horizontal">
        <div class="control-group">
            <!-- #first_step -->
            <div id="first_step">
                <!-- Personal details -->
                <div style="border-radius:20px;border: 2px solid #3dad9c;">
                    <div class="control-group,form">
                        <table class="table table-striped table-condensed">
                            <thead>
                                <tr>
                                    <td colspan="2" style="min-width: 20px;" align="center"><label class="control-label">Personal Details</label></td>
                                </tr>
                            </thead>
                            <tbody>

                                <tr>
                                    <td class="firstcol"><label class="control-label" for="code">Applicant Number</label></td>
                                    <td><input type="text" name="code" id="code" ng-model="scholarshipEnrollment.applicationNumber" maxlength="10" ng-minlength="4" placeholder="Applicant Number" required/>
                                        <span class="error" ng-messages="scholarship.code.$error" ng-if="scholarship.code.$touched">
                                            <span ng-message="minlength">Applicant number is too short. Enter 4-10 characters.</span>
                                            <span ng-message="required">Applicant number is required.</span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><label name="branch" class="control-label">Branch</label></td>
                                    <td><input type="text" ng-model="scholarshipEnrollment.branch" uib-typeahead="bName for bName in branchNames | filter:$viewValue | limitTo:8" id="branchName" placeholder="Branch" autocomplete="off" required />
                                        <span class="error" ng-messages="scholarship.branch.$error" ng-if="scholarship.branch.$touched">
                                            <span ng-message="required">Branch is required.</span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><label class="control-label">Marketing Employee</label></td>
                                    <td>
                                        <span name="employee" marketing-employee mn="scholarshipEnrollment.marketingEmployee" required></span>
                                        <span class="error" ng-messages="scholarship.employee.$error" ng-if="scholarship.employee.$touched">
                                            <span ng-message="required">Marketing Employee is required.</span>
                                        </span>
                                    </td>
                                </tr>

                                <tr>
                                    <td><label class="control-label" for="name">Name of the Student</label></td>
                                    <td><input name="name" type="text" id="name" ng-model="scholarshipEnrollment.name" placeholder="Name" required/>
                                       <span class="error" ng-messages="scholarship.name.$error" ng-if="scholarship.name.$touched">
                                            <span ng-message="required">Student name is required.</span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><label class="control-label" for="fatherOrMotherName">Father/Mother's Name</label></td>
                                    <td><input type="text" name="fatherOrMotherName" id="fatherOrMotherName" ng-model="scholarshipEnrollment.fatherOrMotherName" placeholder="FatherOrMotherName" required/>
                                        <span class="error" ng-messages="scholarship.fatherOrMotherName.$error" ng-if="scholarship.fatherOrMotherName.$touched">
                                            <span ng-message="required">Father name is required.</span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><label class="control-label" for="dateOfBirth">Date Of Birth</label></td>
                                    <td><input type="date" name="dateOfBirth" id="dateOfBirth" ng-model="scholarshipEnrollment.dateOfBirth" required/>
                                        <span class="error" ng-messages="scholarship.dateOfBirth.$error" ng-if="scholarship.dateOfBirth.$touched">
                                            <span ng-message="required">Date of Birth is required.</span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><label class="control-label">Age</label></td>
                                    <td><label class="control-label" id="age">{{calculateAge(scholarshipEnrollment.dateOfBirth)}}</label></td>
                                </tr>
                                <tr>
                                    <td><label class="control-label" for="gender">Gender</label></td>
                                    <td>
                                        <label ng-repeat="gender in commonAttributes.gender">
                                            <input type="radio" ng-model="scholarshipEnrollment.gender" name="gender" id="gender"  placeholder="Gender"
                                                   value="{{gender}}" ng-checked="gender=='MALE'" required/> {{gender}}&nbsp;&nbsp;&nbsp;
                                        </label>
                                        <span class="error" ng-messages="scholarship.gender.$error" ng-if="scholarship.gender.$touched">
                                            <span ng-message="required">Gender is required.</span>
                                        </span>
                                    </td>

                                </tr>

                                <tr>
                                    <td><label class="control-label" for="nationality">Nationality</label></td>
                                    <td><input type="text" name="nationality" id="nationality" ng-model="scholarshipEnrollment.nationality" placeholder="Nationality" required/>
                                        <span class="error" ng-messages="scholarship.nationality.$error" ng-if="scholarship.nationality.$touched">
                                            <span ng-message="required">Nationality is required.</span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><label class="control-label" for="religion">Religion</label></td>
                                    <td>
                                        <select ng-model="scholarshipEnrollment.religion" name="religion" id="religion" placeholder="Religion" required>
                                            <option ng-repeat="religion in commonAttributes.religion" value="{{religion}}">{{religion}}</option>
                                        </select>
                                        <span class="error" ng-messages="scholarship.religion.$error" ng-if="scholarship.religion.$touched">
                                            <span ng-message="required">Religion is required.</span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><label class="control-label" for="caste">Cummunity</label></td>
                                    <td>
                                        <select ng-model="scholarshipEnrollment.caste" name="caste" id="caste" placeholder="Cummunity" required>
                                            <option ng-repeat="caste in commonAttributes.caste" value="{{caste}}">{{caste}}</option>
                                        </select>
                                        <span class="error" ng-messages="scholarship.caste.$error" ng-if="scholarship.caste.$touched">
                                            <span ng-message="required">Cummunity is required.</span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><label class="control-label" for="casteDescription">Caste</label></td>
                                    <td>
                                        <input type="text" ng-model="scholarshipEnrollment.casteDescription" name="casteDescription" id="casteDescription" placeholder="Caste" required/>
                                        <span class="error" ng-messages="scholarship.casteDescription.$error" ng-if="scholarship.casteDescription.$touched">
                                            <span ng-message="required">Caste is required.</span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><label class="control-label" for="maritalStatus">Marital Status</label></td>
                                    <td>
                                        <label ng-repeat="status in commonAttributes.maritalStatus">
                                            <input type="radio" ng-model="scholarshipEnrollment.maritalStatus" name="maritalStatus" id="maritalStatus"
                                                   value="{{status}}" ng-checked="status=='MARRIED'" required/> {{status}}&nbsp;&nbsp;
                                        </label>
                                        <span class="error" ng-messages="scholarship.maritalStatus.$error" ng-if="scholarship.maritalStatus.$touched">
                                            <span ng-message="required">Status is required.</span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><label class="control-label">Annual income</label></td>
                                    <td>
                                        <input type="radio" name="annualIncome" value="Upto 50000" ng-model="scholarshipEnrollment.annualIncome"  ng-checked="value='Upto 50000'" required><label class="control-label">&nbsp; Upto 50,000</label>&nbsp;
                                        <input type="radio" name="annualIncome" value="Upto 100000" ng-model="scholarshipEnrollment.annualIncome"><label class="control-label">&nbsp; Upto 1,00,000</label>&nbsp;
                                        <span class="error" ng-messages="scholarship.annualIncome.$error" ng-if="scholarship.annualIncome.$touched">
                                            <span ng-message="required">Annual Income is required.</span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                   <td><label class="control-label" for="emailId">Email Address</label></td>
                                   <td><input type="email" ng-model="scholarshipEnrollment.emailId" name="emailId" id="emailId" placeholder="Mail Id" required/>
                                       <span class="error" ng-messages="scholarship.emailId.$error" ng-if="scholarship.emailId.$touched">
                                           <span ng-message="required">Email Address is required.</span>
                                           <span ng-message="email">This needs to be a valid email</span>
                                       </span>
                                   </td>
                                </tr>
                                <tr>
                                    <td><label class="control-label" for="studentPhoneNumber">Student Mobile Number</label></td>
                                    <td><input type="number" ng-model="scholarshipEnrollment.studentPhoneNumber" name="studentPhoneNumber" id="studentPhoneNumber"  min="0" ng-pattern="/^[0-9]{10}$/" placeholder="Student mobile number" required/>
                                        <span class="error" ng-messages="scholarship.studentPhoneNumber.$error" ng-if="scholarship.studentPhoneNumber.$touched">
                                            <span ng-message="required">Student Phone number is required.</span>
                                            <span ng-message="pattern">Student Phone number is invalid.</span>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                     <td><label class="control-label" for="parentPhoneNumber">Parent Mobile Number</label></td>
                                     <td><input type="number" ng-model="scholarshipEnrollment.parentPhoneNumber" name="parentPhoneNumber" id="parentPhoneNumber" min="0" ng-pattern="/^[0-9]{10}$/" placeholder="Parent mobile number" required/>
                                         <span class="error" ng-messages="scholarship.parentPhoneNumber.$error" ng-if="scholarship.parentPhoneNumber.$touched">
                                             <span ng-message="required">Parent Phone number is required.</span>
                                             <span ng-message="pattern">Parent Phone number is invalid.</span>
                                         </span>
                                     </td>
                                 </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <br>
                <!--Address deatils-->
                <span address-template addfrm = "scholarship" data="scholarshipEnrollment"> </span>
                <br>
                <!--Education details-->
                <div style="border-radius:20px;border: 2px solid #3dad9c;">
                    <table class="table table-striped table-condensed">
                        <thead>
                            <tr>
                                <td style="min-width: 20px;" align="center" colspan="6"><label class="control-label">Qualification Details</label></td>
                            </tr>
                        </thead>
                        <tr>
                            <td><label for="examPassed">Examination Passed</label></td>
                            <td><label for="instituteName">Institute Name</label></td>
                            <td><label for="groupName">Group Name</label></td>
                            <td style="word-wrap: break-word;"><label style="word-wrap: break-word;" for="passingYear">Year Of Passing</label></td>
                            <td style="word-wrap: break-word;"><label  for="percentageObtained">Percentage <br> Obtained</label></td>
                            <td><label for="remark">Remarks</label></td>
                        </tr>
                        <tbody ng-repeat="educationDetail in scholarshipEnrollment.educationDetails">
                            <tr>
                                <td>
                                    <input type="text" ng-model="educationDetail.examPassed" id="examPassed" placeholder="Exam passed"/>
                                </td>
                                <td>
                                    <input type="text" ng-model="educationDetail.instituteName"
                                           id="instituteName" placeholder="Institute name"/>
                                </td>

                                <td>
                                    <input type="text" ng-model="educationDetail.groupName" id="groupName"
                                           placeholder="Group name"/>
                                </td>
                                <td>
                                    <select ng-model="educationDetail.passingYear" id="passingYear">
                                        <option ng-repeat="year in yearOfPass" value="{{year}}">{{year}}</option>
                                    </select>
                                </td>
                                <td>
                                    <input class="percentage" type="number" ng-model="educationDetail.percentageObtained"
                                           id="percentageObtained" maxlength="3" placeholder="%"/>
                                </td>
                                <td>
                                    <input type="text" ng-model="educationDetail.remark" id="remark"
                                           placeholder="Remark"/>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">&nbsp;</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="bar">
                        <div class="right">
                            <input class="submit" type="submit" name="submit_first" ng-click="updateScholarshipEnrollment()" id="submit_first" value="Next" />
                        </div>
                    </div>
                </div>
            </div>

            <!-- #second_step -->
            <div id="second_step">
                <div class="control-group,form">
                    <div style="border-radius:20px;border: 2px solid #3dad9c;">
                        <table class="table table-striped table-condensed">
                            <thead>
                                <tr>
                                    <td colspan="2" style="min-width: 20px;" align="center"><label class="control-label">Personal Details</label></td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="firstcol"><label class="control-label" for="code">Applicant Number</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.applicationNumber}}</label></td>
                                </tr>
                                <tr>
                                    <td class="firstcol"><label class="control-label">Branch</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.branch}}</label></td>
                                </tr><!--{{ adminService().getBranchCode(scholarshipEnrollment.branchName)}}-->
                                <tr>
                                    <td class="firstcol"><label class="control-label">Marketing Employee</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.marketingEmployee}}</label></td>
                                </tr><!--{{ adminService().getBranchCode(scholarshipEnrollment.marketingEmployee)}}-->
                                <tr>
                                    <td class="firstcol"><label class="control-label" for="name">Name of the Student</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.name}}</label></td>
                                </tr>
                                    <td class="firstcol"><label class="control-label" for="fatherOrMotherName">Father/Mother's Name</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.fatherOrMotherName}}</label></td>
                                <tr>
                                    <td class="firstcol"><label class="control-label" for="dateOfBirth">Date Of Birth</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.dateOfBirth | date}}</label></td>
                                </tr>
                                <tr>
                                    <td class="firstcol"><label class="control-label">Age</label></td>
                                    <td><label class="control-label">{{calculateAge(scholarshipSummarized.dateOfBirth)}}</label></td>
                                </tr>
                                <tr>
                                    <td class="firstcol"><label class="control-label" for="gender">Gender</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.gender}}</label></td>
                                </tr>
                                <tr>
                                    <td class="firstcol"><label class="control-label" for="nationality">Nationality</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.nationality}}</label></td>
                                </tr>
                                <tr>
                                    <td class="firstcol"><label class="control-label" for="religion">Religion</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.religion}}</label></td>
                                </tr>
                                <tr>
                                    <td class="firstcol"><label class="control-label" for="caste">Cummunity</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.caste}}</label></td>
                                </tr>
                                <tr>
                                    <td class="firstcol"><label class="control-label" for="caste">Caste</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.casteDescription}}</label></td>
                                </tr>
                                <tr>
                                    <td class="firstcol"><label class="control-label" for="maritalStatus">Marital Status</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.maritalStatus}}</label></td>
                                </tr>
                                <tr>
                                    <td class="firstcol"><label class="control-label">Annual income</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.annualIncome}}</label></td>
                                </tr>
                                <tr>
                                    <td class="firstcol"><label class="control-label" for="emailId">Email Address</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.emailId}}</label></td>
                                </tr>
                                <tr>
                                    <td class="firstcol"><label class="control-label" for="studentPhoneNumber">Student Mobile Number</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.studentPhoneNumber}}</label></td>
                                </tr>
                                <tr>
                                    <td class="firstcol"><label class="control-label" for="parentPhoneNumber">Parent Mobile Number</label></td>
                                    <td><label class="control-label">{{scholarshipSummarized.parentPhoneNumber}}</label></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <br>
                <div style="border-radius:20px;border: 2px solid #3dad9c;">
                    <table class="table table-striped table-condensed">
                        <thead>
                            <tr>
                                <td colspan="2" style="min-width: 20px;" align="center"><label class="control-label">Address Details</label></td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="firstcol"><label class="control-label">Adddress 1</label></td>
                                <td><label class="control-label">{{scholarshipSummarized.address.address1}}</label></td>
                            </tr>
                            <tr>
                                <td class="firstcol"><label class="control-label">Address 2</label></td>
                                <td><label class="control-label">{{scholarshipSummarized.address.address2}}</label></td>
                            </tr>
                            <tr>
                                <td class="firstcol"><label class="control-label">Address 3</label></td>
                                <td><label class="control-label">{{scholarshipSummarized.address.address3}}</label></td>
                            </tr>
                            <tr>
                                <td class="firstcol"><label class="control-label">Taluk</label></td>
                                <td><label class="control-label">{{scholarshipSummarized.address.taluk}}</label></td>
                            </tr>
                            <tr>
                                <td class="firstcol"><label class="control-label">District</label></td>
                                <td><label class="control-label">{{scholarshipSummarized.address.district}}</label></td>
                            </tr>
                            <tr>
                                <td class="firstcol"><label class="control-label">Postal Code</label></td>
                                <td><label class="control-label">{{scholarshipSummarized.address.postalCode}}</label></td>
                            </tr>

                            <tr>
                                <td colspan="2">&nbsp;</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <br>
                <div style="border-radius:20px;border: 2px solid #3dad9c;">
                    <table class="table table-striped table-condensed">
                        <thead>
                            <tr>
                                <td colspan="2" style="min-width: 20px;" align="center"><label class="control-label">Qualification Details</label></td>
                            </tr>
                        </thead>
                        <tbody ng-repeat="educationDetail in scholarshipSummarized.educationDetails track by $index">
                            <tr>
                                <td class="firstcol">
                                    <label class="control-label" for="examPassed">Examination Passed</label>
                                </td>
                                <td><label class="control-label">{{educationDetail.examPassed}}</label></td>
                            </tr>
                            <tr>
                                <td class="firstcol">
                                    <label class="control-label" for="instituteName">Institute Name</label>
                                </td>
                                <td><label class="control-label">{{educationDetail.instituteName}}</label></td>
                            </tr>
                            <tr>
                                <td class="firstcol">
                                    <label class="control-label" for="groupName">Group Name</label>
                                </td>
                                <td><label class="control-label">{{educationDetail.groupName}}</label></td>
                            </tr>
                            <tr>
                                <td class="firstcol">
                                    <label class="control-label" for="passingYear">Year Of Passing</label>
                                </td>
                                <td><label class="control-label">{{educationDetail.passingYear}}</label></td>
                            </tr>
                            <tr>
                                <td class="firstcol">
                                    <label class="control-label" for="percentageObtained">Percentage Obtained</label>
                                </td>
                                <td><label class="control-label">{{educationDetail.percentageObtained}}</label></td>
                            </tr>
                            <tr>
                                <td class="firstcol">
                                    <label class="control-label" for="remark">Remarks</label>
                                </td>
                                <td><label class="control-label">{{educationDetail.remark}}</label></td>
                            </tr>
                            <tr>
                                <td colspan="2">&nbsp;</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <br>
                <br>
                <div class="control-group">
                    <div class="controls" align="left">
                        <input class="button" type="submit" name="submit_back_first" id="submit_back_first" value="Back" />
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <a ng-click="createNewScholarshipEnrollment()" ng-class="{linkdisabled: scholarship.$invalid}" class="btn btn-small btn-primary">Submit</a>
                    </div>
                </div>
                <br>
                <br>
                <br><br>
            </div>
        </div>
    </form>
</div>
<br>


